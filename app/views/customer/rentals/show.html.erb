<div class="container">
	<h2>Rental Details</h2>
	<table class="table">
	  <thead>
	    <tr>
	      <th scope="col">Car</th>
	      <th scope="col">Pickup Date/Time</th>
	      <th scope="col">Dropoff Date/Time</th>
	      <th scope="col">Pickup Location</th>
	      <th scope="col">Dropoff Location</th>
	     	<th scope="col">Duration</th>
	     	<th scope="col">Total Price</th>
	     	<th scope="col">Status</th>
	      <th scope="col">To Pay</th>

	    </tr>
	  </thead>
	  <tbody>
	    <tr>
	      <td><%= @rental.car.car_name%></th>
	      <td><%= @rental.pick_up%></td>
	      <td><%= @rental.drop_off%></td>
	      <td><%= @rental.pick_up_location%></td>
	      <td><%= @rental.drop_off_location%></td>
	      <td><%= @rental.duration%></td>
	      <td><%= @rental.total_price%></td>
	      <td><%= @rental.status%></td>
	      <td><%= button_to "Cancel", customer_rental_path(@rental, status: "cancel"), method: :put, class: "btn btn-primary"%></td>
	    </tr>
	  </tbody>
	</table>
</div>

<div class="container">

	<div id="dropin-wrapper">
	  <div id="checkout-message"></div>
	  <div id="dropin-container"></div>
	  <button id="submit-button">Submit payment</button>
	</div>
	<script>
	  var button = document.querySelector('#submit-button');

	  braintree.dropin.create({
	    // Insert your tokenization key here
	    authorization: "<%= @client_token%>",
	    container: '#dropin-container'
	  }, function (createErr, instance) {
	    button.addEventListener('click', function () {
	      instance.requestPaymentMethod(function (requestPaymentMethodErr, payload) {
	        // When the user clicks on the 'Submit payment' button this code will send the
	        // encrypted payment information in a variable called a payment method nonce
	        $.ajax({
	          type: 'POST',
	          url: '/checkout',
	          data: {'payment_method_nonce': payload.nonce}
	        }).done(function(result) {

	        });
	      });
	    });
	  });
	</script>

</div>